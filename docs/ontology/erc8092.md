## ERC-8092 ontology (`ERC8092.owl`)

Source: `apps/badge-admin/public/ontology/ERC8092.owl`

### Full diagram (generated)

- PNG: `docs/ontology/images/ERC8092.png`
- SVG: `docs/ontology/images/ERC8092.svg`

![ERC8092 ontology diagram](./images/ERC8092.png)

### Section diagram

![ERC8092 relationships and accounts](./images/sections/erc8092-relationships.png)

### Account association assertions (assertion-side only)

ERC-8092 is modeled as **assertion-side only** (no situation vocabulary):

- `erc8092:AssociatedAccounts8092` is the on-chain associated-accounts record (durable assertion record / Entity).
- Its associated act (`erc8092:AssociatedAccountsAct8092`) asserts a `agentictrust:RelationshipTrustSituation` via `agentictrust:assertsSituation`.
- That situation points at the underlying relationship entity (core/eth): `agentictrust:aboutSubject` → `agentictrustEth:AccountRelationship`.

**Inheritance hierarchy:**

ERC-8092 assertion classes inherit from both account-level and abstract relationship-level classes:

```
agentictrust:TrustAssertion (core)
  ├── agentictrust:RelationshipTrustAssertion (core - abstract)
  └── agentictrustEth:TrustAssertion8092 (eth - account-level)
       └── erc8092:AssociatedAccounts8092 (inherits from both RelationshipTrustAssertion and TrustAssertion8092)
       └── erc8092:AssociatedAccountsRevocation8092 (inherits from both RelationshipTrustAssertion and TrustAssertion8092)
```

This dual inheritance allows:
- **Account-level queries**: Use `TrustAssertion8092` to find all account-to-account relationship assertions
- **Abstract relationship queries**: Use `RelationshipTrustAssertion` to find all relationship assertions (including ERC-8092 and future protocols)
- **ERC-8092 specific queries**: Use `AssociatedAccounts8092` for ERC-8092 specific properties and data

**Key design:**
- ERC-8092 defines **only assertion vocabulary** at the account level
- Situation vocabulary (`RelationshipTrustSituation`) comes from the core ontology
- `Account` is a subclass of `prov:SoftwareAgent`, enabling it to participate in relationships
- `AccountRelationship` inherits from `agentictrust:Relationship`, inheriting participant and role properties
- Relationships link to participant Accounts via `agentictrust:hasParticipant` (from core ontology)

```mermaid
classDiagram
direction TB

class TrustAssertion["agentictrust:TrustAssertion"]
class RelationshipTrustAssertion["agentictrust:RelationshipTrustAssertion"]
class TrustAssertion8092["agentictrustEth:TrustAssertion8092"]
class AssociatedAccounts["erc8092:AssociatedAccounts8092"]
class AssociatedAccountsAct["erc8092:AssociatedAccountsAct8092"]
class AssociatedAccountsRevocation["erc8092:AssociatedAccountsRevocation8092"]
class RelationshipTrustSituation["agentictrust:RelationshipTrustSituation"]
class AccountRelationship["agentictrustEth:AccountRelationship"]
class Account["agentictrustEth:Account"]
class AIAgent["agentictrust:AIAgent"]
class provSoftwareAgent["prov:SoftwareAgent"]

TrustAssertion <|-- RelationshipTrustAssertion
TrustAssertion <|-- TrustAssertion8092
TrustAssertion8092 <|-- AssociatedAccounts
RelationshipTrustAssertion <|-- AssociatedAccounts
TrustAssertion8092 <|-- AssociatedAccountsRevocation
RelationshipTrustAssertion <|-- AssociatedAccountsRevocation

Account --|> provSoftwareAgent
AIAgent --|> provSoftwareAgent

Account --> AssociatedAccounts : hasAssociatedAccounts
AssociatedAccounts --> RelationshipTrustSituation : recordsSituation
AssociatedAccountsAct --> RelationshipTrustSituation : assertsSituation
AssociatedAccountsAct --> AssociatedAccounts : generatedAssertionRecord
RelationshipTrustSituation --> AccountRelationship : aboutSubject

AssociatedAccounts --> Account : initiator
AssociatedAccounts --> Account : approver
AssociatedAccountsRevocation --> AssociatedAccounts : revocationOfAssociatedAccounts

RelationshipTrustSituation --> Account : isAboutAgent
RelationshipTrustSituation --> AIAgent : isAboutAgent
RelationshipTrustSituation --> Account : hasSituationParticipant
RelationshipTrustSituation --> AIAgent : hasSituationParticipant
AccountRelationship --> Account : hasParticipant
```

### Translation from Account-level to AI Agent-level

ERC-8092 operates at the **account level** (initiator/approver are `Account` entities), but the system translates these to **AI Agent-level** situations:

1. **Account initiator/approver → RelationshipTrustSituation:**
   - The `erc8092:initiator` and `erc8092:approver` properties point to `Account` entities
   - The `RelationshipTrustSituation` (created by the core ontology) links to these accounts via:
     - `agentictrust:isAboutAgent` → Account (always present)
     - `agentictrust:isAboutAgent` → AIAgent (when account maps to an AI Agent)
     - `agentictrust:hasSituationParticipant` → Account and AIAgent (when mapped)

2. **Account-to-AI-Agent mapping:**
   - When an `Account` is associated with an `AIAgent` (via `agentictrustEth:hasAccountIdentifier`), the exporter automatically:
     - Adds `isAboutAgent` links from the `RelationshipTrustSituation` to the `AIAgent`
     - Adds `hasSituationParticipant` links to the `AIAgent`
   - This enables querying relationship situations by AI Agent, even though ERC-8092 only knows about accounts

3. **Relationship as subject:**
   - The `RelationshipTrustSituation` has `agentictrust:aboutSubject` pointing to the `AccountRelationship` entity
   - The `AccountRelationship` has `agentictrust:hasParticipant` links to the participant `Account` entities
   - This creates a complete graph: Situation → Relationship → Accounts → (optionally) AIAgents

### SPARQL Queries (demonstrating property relationships)

**Query RelationshipAssertion with Relationship and Accounts:**
```sparql
PREFIX erc8092: <https://www.agentictrust.io/ontology/ERC8092#>
PREFIX agentictrust: <https://www.agentictrust.io/ontology/agentictrust-core#>

SELECT ?association ?situation ?initiator ?approver ?initiatorAccountId ?approverAccountId
WHERE {
  ?association a erc8092:AssociatedAccounts8092 .
  OPTIONAL { ?association agentictrust:recordsSituation ?situation . }
  OPTIONAL { ?association erc8092:initiator ?initiator . }
  OPTIONAL { ?association erc8092:approver ?approver . }
  OPTIONAL { ?association erc8092:initiatorAccountId ?initiatorAccountId . }
  OPTIONAL { ?association erc8092:approverAccountId ?approverAccountId . }
}
```

**Query RelationshipTrustSituation for an AI Agent (showing account-to-agent translation):**
```sparql
PREFIX agentictrust: <https://www.agentictrust.io/ontology/agentictrust-core#>
PREFIX agentictrustEth: <https://www.agentictrust.io/ontology/agentictrust-eth#>

SELECT ?agent ?situation ?relationship ?account
WHERE {
  ?agent a agentictrust:AIAgent ;
    agentictrust:agentId "3223" ;
    agentictrustEth:hasAccountIdentifier ?acctId .

  ?account agentictrustEth:hasIdentifier ?acctId .

  ?situation a agentictrust:RelationshipTrustSituation ;
    agentictrust:isAboutAgent ?account ;
    agentictrust:aboutSubject ?relationship .
}
```

**Query AssociatedAccountsRevocation8092:**
```sparql
PREFIX erc8092: <https://www.agentictrust.io/ontology/ERC8092#>

SELECT ?revocation ?revokedAssociation ?revocationTxHash
WHERE {
  ?revocation a erc8092:AssociatedAccountsRevocation8092 .
  OPTIONAL { ?revocation erc8092:revocationOfAssociatedAccounts ?revokedAssociation . }
  OPTIONAL { ?revocation erc8092:revocationTxHash ?revocationTxHash . }
}
```

### Key identifiers (datatype properties)

- On the association assertion:
  - `erc8092:associationId`
  - `erc8092:relationshipAssertionId`
  - `erc8092:initiatorAccountId` / `erc8092:approverAccountId`


